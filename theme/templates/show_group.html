{% extends 'base_components/base.html' %}
{% load components %}
{% load static %}

{% block title_block %}
  {% if group %}
    {{ group.groupName }}
  {% else %}
    Unknown study group
  {% endif %}
{% endblock %}

{% block body_block %}
  <div class=" h-full min-h-screen w-full bg-yellow-500 flex flex-row">
    
    {% Message condition=group div_css="pt-24 p-8 flex flex-row justify-center items-center w-full" msg_css="p-2 text-lg bg-white" msg="The group you are looking for does not exist."%}
      <!-- Main -->
      <div class="pt-24 p-8 w-3/4 flex flex-col justify-items-center space-y-4">
        <!-- NavBar -->
        <div class="flex flex-row justify-between items-center rounded-lg p-2">
          <a class=" border-white border-2 p-2 rounded-lg text-base text-white font-bold
          hover:text-yellow-500 hover:bg-white"
          href="{% url 'notes:search' %}">Back</a>
          <h1 class="p-2 text-center w-1/2 border-b-4 border-white text-white text-xl font-bold">{{ group.groupName }}</h1>
          <!-- Join, Leave, Delete buttons -->
          {% Group_buttons group=group user=user%} {% /Group_buttons %}
        </div>

        <!-- Meeting details -->
        <div class=" p-2 px-4 flex flex-col justify-center bg-white rounded-lg shadow-lg">
          <h1 class="w-full text-lg font-bold">Meeting links</h1>
          <div class="px-8 p-2 flex flex-row space-x-4 rounded-lg bg-white">
            {% for url in urls %}
            <a href='{{ url.link }}' target="_blank" class="text-center border-blue-500 border-b-2 font-semibold text-blue-500">{{ url.label }}</a>
            {% endfor %}
          </div>
        </div>

        <!-- Notes -->
        <div class="p-4 px-4 flex flex-col justify-center items-center bg-white rounded-lg shadow-lg">
          <!-- Notes Navbar -->
          <div class= "flex flex-row justify-between items-center w-full ">
            <h1 class="w-full text-lg font-bold">Notes</h1>
            <button class="p-1 px-2 text-base rounded-lg border-2 bg-white border-green-600 font-bold text-green-600 hover:text-white hover:bg-green-600">Upload</button>
          </div>

          {% Message condition=notes msg="No notes have been uploaded yet.<br> Be the first!"%}
            <div class="w-full p-4 px-8 flex flex-col space-y-4">
              {% for note in notes %}
                <!-- File -->
                <div class="w-full flex flex-col rounded-lg border-black border-2">
                  <!-- File Navbar -->
                  <div onclick="toggle('{{note}}','block')" class="w-full border-black border-b-2 p-2 flex flex-row items-center">
                    <img src="{% static 'icons/drop.png' alt='dropdown' %}" class="w-5 h-5"/>
                    <h1 class="px-4 text-blue-800 font-bold">{{note.noteName}}</h1>
                  </div>
                  <!-- File body -->
                  <div id='{{note}}' class="hidden p-2 px-4 text-sm space-y-4">
                    <!-- Details Navbar -->
                    <div class="flex flex-row justify-between px-8">
                      <div class="flex flex-row items-center justify-center">
                        <label class="pr-2">Uploaded by:</label>
                        <h1 class="font-semibold">{{ note.user }}</h1>
                      </div>
                      <hi>{{ note.date }}</hi>
                    </div>
                    <!-- description -->
                    <div class="space-y-2">
                      <h1 class=" text-base font-semibold w-full border-black border-b-2">Description</h1>
                      <p>{{ note.description }}</p>    
                    </div>
                    <!-- Comments -->
                    <div class="flex flex-col space-y-4 justify-center">
                      <div class="w-full border-black border-b-2 flex flex-row items-center">
                        <img src="{% static 'icons/drop.png' alt='dropdown' %}" class="w-3 h-3"/>
                        <h1 class="px-2 text-base font-semibold">Comments</h1> 
                      </div>
                      
                      {% for comment in comments|getItem:note.noteName %}
                        <div class="px-4 space-y-2">
                          <div class="">
                          {% Card_user css="text-sm" user=comment.user%}{% /Card_user %} 
                          </div>
                          <p class="px-4">{{ comment.text }}</p>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          {% /Message %}

        </div>

        <!-- Members -->
        <div class="flex flex-col justify-center bg-white rounded-lg shadow-lg">
          <h1 class="p-2 pl-4 w-full text-lg font-bold">Members</h1>
          <div class="px-8 pt-2 p-4 flex flex-row space-x-4 rounded-lg bg-white">
            {% for member in members %}
              {% Card_user css="shadow-md" user=member%}{% /Card_user %}    
            {% endfor %}
          </div>
        </div>
      </div>
    
      <!-- Sidebar -->
      <div class=" pt-24 p-8 w-1/4 bg-yellow-400 space-y-4">
        <!-- group Description -->
        {% Card_parent title="Description"%}
          {% Message condition=group.description msg="No description available"%}
            <p class="text-sm">{{ group.description }}</p>
          {% /Message %}
        {% /Card_parent %}

        {% Card_parent title="Rules"%}
          {% Message condition=group.rules msg="This group has no rules!"%}
            <p class="text-sm">{{ group.rules }}</p>
          {% /Message %}
        {% /Card_parent %}
      </div>

    {% /Message %}
    
  </div>
{% endblock %}

